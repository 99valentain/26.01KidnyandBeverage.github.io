<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 ì—°êµ¬ë…¸íŠ¸: ìŒë£Œì™€ ì‹ ì¥ ê±´ê°• (Fix Edition)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />

    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #E0F2FE; /* ê°€ë…ì„±ì„ ìœ„í•œ ì—°í•œ í•˜ëŠ˜ìƒ‰ ë°°ê²½ */
            color: #1E293B;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }
        .mobile-card { border-radius: 1.5rem; box-shadow: 0 4px 20px -5px rgba(0, 0, 0, 0.1); background-color: white; }
        .hero-card { background: linear-gradient(135deg, #0F172A 0%, #1E3A8A 100%); color: white; }
        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
            height: 6px; width: 6px; background-color: #3B82F6; border-radius: 50%; display: inline-block; margin: 0 2px;
        }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body class="antialiased pb-20">

    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <span class="text-2xl animate-bounce">ğŸ«˜</span>
                    <h1 class="font-bold text-slate-800 text-lg">2026 ì—°êµ¬ë…¸íŠ¸</h1>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-3xl mx-auto px-4 py-6 space-y-12">

        <!-- ì„¹ì…˜ 1: ì—°êµ¬ ê°œìš” -->
        <section class="mobile-card hero-card p-8 relative overflow-hidden">
            <div class="relative z-10">
                <div class="inline-block px-3 py-1 bg-yellow-400 text-slate-900 rounded-full text-[10px] font-bold mb-4">2026.01 PROJECT</div>
                <h2 class="text-3xl font-black mb-4"><span class="text-sky-300">í•œêµ­ì¸</span>ì˜ ìŒë£Œ ì„­ì·¨, ì‹ ì¥ì— ì–´ë–¤ ì˜í–¥ì„ ì¤„ê¹Œ?</h2>
                <p class="text-sky-100 text-sm mb-8 opacity-90">ë‹¹ì‹ ì˜ ì„ íƒì´ ì‹ ì¥ ê±´ê°•ì„ ì¢Œìš°í•©ë‹ˆë‹¤.</p>

                <div class="bg-black/20 backdrop-blur-md p-6 rounded-2xl border border-white/10">
                    <h3 class="text-[10px] font-bold text-sky-200 uppercase tracking-widest mb-4">Research Metrics</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between text-xs"><span>ë¶„ì„ ë°ì´í„°</span><span class="text-yellow-300 font-bold">KNHANES (êµ­ê±´ì˜)</span></div>
                        <div class="w-full bg-white/10 h-2 rounded-full"><div class="bg-yellow-400 h-full w-full"></div></div>
                        <div class="flex gap-1 h-2">
                            <div class="bg-slate-500 w-1/4 rounded-l-full"></div>
                            <div class="bg-emerald-400 w-1/4"></div>
                            <div class="bg-yellow-400 w-1/4"></div>
                            <div class="bg-rose-500 w-1/4 rounded-r-full"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ì„¹ì…˜ 2: ì‹ ì¥ ë‹¤ë§ˆê³ ì¹˜ (ìˆ˜ì •ë¨) -->
        <section id="lab" class="mobile-card p-6 border border-slate-100">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold">ğŸ§ª ë‚´ ì‹ ì¥ ë‹¤ë§ˆê³ ì¹˜</h2>
                <p class="text-slate-500 text-xs">ìŒë£Œë¥¼ í´ë¦­í•˜ë©´ ì²´ë ¥ ë°”ê°€ ë³€í•©ë‹ˆë‹¤!</p>
            </div>

            <div class="bg-slate-50 rounded-2xl p-8 flex flex-col items-center justify-center mb-6 border border-slate-200 relative">
                <button onclick="window.resetDrinks()" class="absolute top-4 right-4 text-xs bg-white px-3 py-1 rounded-full border shadow-sm">â†º ë¦¬ì…‹</button>
                <div id="kidney-char" class="text-[80px] mb-3 transition-all duration-300 cursor-pointer" onclick="pokeKidney()">ğŸ«˜</div>
                <h3 id="status-title" class="text-xl font-black mb-1">ë§¤ìš° ê±´ê°•í•¨</h3>
                <p id="status-desc" class="text-xs text-slate-400 mb-4">ìƒíƒœê°€ ì•„ì£¼ ì¢‹ìŠµë‹ˆë‹¤.</p>
                
                <!-- ë°”ê°€ ë³€í•˜ì§€ ì•Šë˜ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ìŠ¤íƒ€ì¼ ê³ ì • -->
                <div class="w-full bg-slate-200 rounded-full h-4 overflow-hidden shadow-inner">
                    <div id="health-bar" class="bg-emerald-500 h-full w-full transition-all duration-500 ease-out" style="width: 100%;"></div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-3 mb-4">
                <button onclick="window.addDrink('tea')" class="bg-emerald-50 p-4 rounded-xl flex flex-col items-center relative">ğŸµ <span class="text-xs font-bold mt-1">ì°¨</span> <span id="count-tea" class="text-[10px] ml-1">0</span></button>
                <button onclick="window.addDrink('black')" class="bg-slate-50 p-4 rounded-xl flex flex-col items-center relative">â˜• <span class="text-xs font-bold mt-1">ë¸”ë™ì»¤í”¼</span> <span id="count-black" class="text-[10px] ml-1">0</span></button>
                <button onclick="window.addDrink('mix')" class="bg-amber-50 p-4 rounded-xl flex flex-col items-center relative">ğŸ¬ <span class="text-xs font-bold mt-1">ë¯¹ìŠ¤ì»¤í”¼</span> <span id="count-mix" class="text-[10px] ml-1">0</span></button>
                <button onclick="window.addDrink('ssb')" class="bg-rose-50 p-4 rounded-xl flex flex-col items-center relative">ğŸ¥¤ <span class="text-xs font-bold mt-1">ê°€ë‹¹ìŒë£Œ</span> <span id="count-ssb" class="text-[10px] ml-1">0</span></button>
            </div>
            <label class="flex items-center justify-center gap-2 p-3 bg-slate-50 rounded-xl cursor-pointer">
                <input type="checkbox" id="check-diabetes" onchange="updateUI()">
                <span class="text-sm font-bold text-slate-600">ğŸ©¸ ë‹¹ë‡¨ë³‘ ìˆìŒ (ìœ„í—˜ë„ ì¦ê°€)</span>
            </label>
        </section>

        <!-- ì„¹ì…˜ 3: AI í•˜ëŠ˜ì”¨ -->
        <section id="chat" class="mobile-card h-[500px] flex flex-col overflow-hidden">
            <div class="p-4 bg-sky-600 text-white font-bold">AI í•˜ëŠ˜ì”¨.</div>
            <div id="chat-window" class="flex-1 p-4 overflow-y-auto space-y-4 bg-slate-50 text-sm"></div>
            <div class="p-4 bg-white border-t flex gap-2">
                <input type="text" id="chat-input" placeholder="ì§ˆë¬¸í•˜ê¸°..." class="flex-1 bg-slate-100 rounded-xl px-4 py-2 border-0">
                <button onclick="handleChat()" class="bg-sky-600 text-white px-4 rounded-xl">ì „ì†¡</button>
            </div>
        </section>

        <footer class="text-center pb-10">
            <p class="text-slate-500 text-[11px] leading-relaxed px-6">
                Â© (2026) í•˜ëŠ˜ì”¨ : AIê°€ ê±°ì§“ë§ì„ ì•„ì£¼ ì˜í•´ì„œìš”..<br>
                ì‚¬ì‹¤ ê¸°ë°˜ ê·¼ê±°ìë£Œê°€ ì•„ë‹Œ ê²ƒì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤ :)<br>
                <br>
                ì•„ë‹ˆ ê¸€ì„.. ì œê°€ ë¯¸ë˜ì‹ë‹¨ ì½”í˜¸íŠ¸ ì—°êµ¬íŒ€ì— ìˆë‹¤ì§€ ë­¡ë‹ˆê¹Œ ã…‹ã…‹ã…‹
            </p>
        </footer>
    </main>

    <script>
        const GEMINI_API_KEY = "AIzaSyDUbyxJarLwFPXHnM7y3nSSeNdrJ0-BSSU";
        const counts = { black: 0, tea: 0, mix: 0, ssb: 0 };

        window.addDrink = (t) => { counts[t]++; updateUI(); };
        window.resetDrinks = () => { for(let k in counts) counts[k]=0; updateUI(); };

        function updateUI() {
            // ì¹´ìš´íŠ¸ í‘œì‹œ
            for(let k in counts) {
                const el = document.getElementById(`count-${k}`);
                if(el) el.innerText = counts[k];
            }

            // ì ìˆ˜ ê³„ì‚° ë¡œì§ (ìˆ˜ì •)
            // ë¸”ë™/ì°¨ëŠ” ì•½ê°„ì˜ ë³´ë„ˆìŠ¤, ë¯¹ìŠ¤/ê°€ë‹¹ì€ í° íŒ¨ë„í‹°
            let score = 100 + (counts.black * 1) + (counts.tea * 1) - (counts.mix * 8) - (counts.ssb * 12);
            if(document.getElementById('check-diabetes').checked) score -= (counts.mix * 5 + counts.ssb * 8);
            
            score = Math.max(0, Math.min(100, score)); // 0~100 ì‚¬ì´ë¡œ ê³ ì •

            const char = document.getElementById('kidney-char');
            const title = document.getElementById('status-title');
            const bar = document.getElementById('health-bar');
            const desc = document.getElementById('status-desc');

            // ë°” ë„ˆë¹„ ì—…ë°ì´íŠ¸
            bar.style.width = score + "%";

            // ìƒíƒœì— ë”°ë¥¸ ìƒ‰ìƒ ë° ì•„ì´ì½˜ ë³€ê²½
            if(score > 80) {
                char.innerText = 'ğŸ«˜'; title.innerText = 'ë§¤ìš° ê±´ê°•í•¨';
                bar.className = 'h-full transition-all duration-500 bg-emerald-500';
                desc.innerText = "ìƒíƒœê°€ ì•„ì£¼ ì¢‹ìŠµë‹ˆë‹¤.";
            } else if(score > 50) {
                char.innerText = 'ğŸ™‚'; title.innerText = 'ì–‘í˜¸í•¨';
                bar.className = 'h-full transition-all duration-500 bg-sky-500';
                desc.innerText = "ë‚˜ì˜ì§€ ì•Šì§€ë§Œ ë‹¹ë¶„ì„ ì¡°ì‹¬í•˜ì„¸ìš”.";
            } else if(score > 25) {
                char.innerText = 'ğŸ˜µâ€ğŸ’«'; title.innerText = 'ë¶€ë‹´ìŠ¤ëŸ¬ì›Œìš”';
                bar.className = 'h-full transition-all duration-500 bg-amber-500';
                desc.innerText = "ì‹ ì¥ì´ í”¼ë¡œë¥¼ ëŠë¼ê³  ìˆìŠµë‹ˆë‹¤.";
            } else {
                char.innerText = 'ğŸ¤®'; title.innerText = 'ìœ„í—˜!';
                bar.className = 'h-full transition-all duration-500 bg-rose-500';
                desc.innerText = "ì¦‰ì‹œ ë‹¹ë¶„ ì„­ì·¨ë¥¼ ë©ˆì¶°ì•¼ í•©ë‹ˆë‹¤!";
            }
        }

        async function handleChat() {
            const input = document.getElementById('chat-input');
            const win = document.getElementById('chat-window');
            if(!input.value.trim()) return;
            const text = input.value;
            win.innerHTML += `<div class="flex justify-end"><div class="bg-sky-600 text-white p-2 rounded-xl rounded-tr-none max-w-[80%]">${text}</div></div>`;
            input.value = '';
            win.scrollTop = win.scrollHeight;

            const loadId = 'ai-' + Date.now();
            win.innerHTML += `<div id="${loadId}" class="flex gap-2"><span>ğŸ‘©â€ğŸ”¬</span><div class="bg-white p-2 rounded-xl flex items-center"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div></div>`;
            
            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: text }] }] })
                });
                const data = await res.json();
                document.getElementById(loadId).remove();
                const reply = marked.parse(data.candidates[0].content.parts[0].text);
                win.innerHTML += `<div class="flex gap-2"><span>ğŸ‘©â€ğŸ”¬</span><div class="bg-white p-3 rounded-2xl border shadow-sm">${reply}</div></div>`;
            } catch(e) { document.getElementById(loadId).innerHTML = 'ì—°ê²° ì˜¤ë¥˜'; }
            win.scrollTop = win.scrollHeight;
        }

        function pokeKidney() {
            const c = document.getElementById('kidney-char');
            c.classList.add('animate__animated', 'animate__rubberBand');
            setTimeout(() => c.classList.remove('animate__rubberBand'), 1000);
        }

        document.getElementById('chat-input').addEventListener('keypress', (e) => { if(e.key==='Enter') handleChat(); });
        updateUI();
    </script>
</body>
</html>
