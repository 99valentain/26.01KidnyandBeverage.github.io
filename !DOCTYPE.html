<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ì—°êµ¬ë…¸íŠ¸: ì»¤í”¼ì™€ ì‹ ì¥ ê±´ê°• ìƒí˜¸ì‘ìš© ëŒ€ì‹œë³´ë“œ (AI Powered)</title>
    
    <!-- Tailwind CSS (Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js (Visualization) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Font (Noto Sans KR) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <!-- CSS Configuration -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #FDFBF7; /* Warm neutral background */
            color: #2D3748;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #A0AEC0;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #718096;
        }

        /* Chart Container Styling (Mandatory) */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width for readability */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        
        .card-hover {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* AI Loading Animation */
        .typing-indicator span {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #3B82F6;
            border-radius: 50%;
            animation: typing 1s infinite;
            margin: 0 2px;
        }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 100% { transform: translateY(0); opacity: 0.5; }
            50% { transform: translateY(-5px); opacity: 1; }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Navigation / Header -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">â˜•</span>
                    <div>
                        <h1 class="font-bold text-gray-900 leading-tight">2026 ì˜ì–‘ì—­í•™ ì—°êµ¬ë…¸íŠ¸ <span class="text-blue-500 text-xs ml-1 border border-blue-200 bg-blue-50 px-1 rounded">AI Powered</span></h1>
                        <p class="text-xs text-gray-500">ì—°êµ¬ì±…ì„: ì œìœ ì§„ êµìˆ˜ë‹˜ | ì—°êµ¬ì›: ì¡°í•˜ëŠ˜</p>
                    </div>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#overview" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium">ì—°êµ¬ ê°œìš”</a>
                    <a href="#analysis" class="text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium">ì„±ë¶„ ë¶„ì„</a>
                    <a href="#simulation" class="text-blue-600 hover:text-blue-800 px-3 py-2 rounded-md text-sm font-bold">âœ¨ AI ìê°€ ì§„ë‹¨</a>
                    <a href="#ai-assistant" class="text-purple-600 hover:text-purple-800 px-3 py-2 rounded-md text-sm font-bold">ğŸ¤– AI ì±—ë´‡</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-20">

        <!-- SECTION 1: RESEARCH OVERVIEW (Hero) -->
        <section id="overview" class="relative">
            <div class="bg-gradient-to-r from-stone-800 to-stone-700 rounded-3xl p-8 md:p-12 text-white shadow-xl overflow-hidden">
                <div class="relative z-10 grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <div class="inline-block px-3 py-1 bg-yellow-500 text-yellow-900 rounded-full text-xs font-bold mb-4">2026ë…„ 1ì›” ì—°êµ¬ê³¼ì œ</div>
                        <h2 class="text-3xl md:text-4xl font-extrabold mb-4 leading-tight">
                            ì‹ ì¥ê¸°ëŠ¥ê³¼ ìŒë£Œì™€ì˜ ì—°ê´€ì„±.
                        </h2>
                        <p class="text-stone-300 text-lg mb-6 leading-relaxed">
                            "ë¸”ë™ì»¤í”¼ëŠ” ê±´ê°•ì— ì¢‹ë‹¤"ëŠ” ì„œêµ¬ì˜ ì—°êµ¬ ê²°ê³¼,<br>
                            ê³¼ì—° <strong>ë¯¹ìŠ¤ì»¤í”¼</strong>ë¥¼ ì¦ê¸°ëŠ” í•œêµ­ì¸ì—ê²Œë„ ìœ íš¨í• ê¹Œìš”?<br>
                            <br>
                            ë³¸ ì—°êµ¬ëŠ” êµ­ë¯¼ê±´ê°•ì˜ì–‘ì¡°ì‚¬(KNHANES) ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ
                            ì»¤í”¼ì˜ ì¢…ë¥˜(Type)ì™€ ê°€ë‹¹ìŒë£Œ ì„­ì·¨ê°€ ì‹ ì¥ ê¸°ëŠ¥(eGFR)ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ë¶„ì„í•©ë‹ˆë‹¤.
                        </p>
                        <div class="flex gap-4">
                            <button onclick="document.getElementById('simulation').scrollIntoView({behavior: 'smooth'})" class="bg-white text-stone-800 px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition shadow-lg flex items-center gap-2">
                                <span>âœ¨</span> AI ìœ„í—˜ë„ ì˜ˆì¸¡í•˜ê¸°
                            </button>
                        </div>
                    </div>
                    <!-- Abstract Visualization using CSS Grid/Flex -->
                    <div class="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20">
                        <h3 class="text-sm font-bold text-stone-300 uppercase tracking-wider mb-4">Research Key Metrics</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">ë¶„ì„ ë°ì´í„°</span>
                                <span class="font-mono font-bold text-yellow-400">KNHANES (êµ­ê±´ì˜)</span>
                            </div>
                            <div class="w-full bg-stone-600 h-2 rounded-full overflow-hidden">
                                <div class="bg-yellow-400 h-full" style="width: 100%"></div>
                            </div>
                            
                            <div class="flex items-center justify-between pt-2">
                                <span class="text-sm">ì£¼ìš” íƒ€ê²Ÿ ë³€ìˆ˜</span>
                                <span class="font-mono font-bold text-green-400">eGFR (ì‚¬êµ¬ì²´ì—¬ê³¼ìœ¨)</span>
                            </div>
                            <div class="w-full bg-stone-600 h-2 rounded-full overflow-hidden">
                                <div class="bg-green-400 h-full" style="width: 85%"></div>
                            </div>

                            <div class="flex items-center justify-between pt-2">
                                <span class="text-sm">í•µì‹¬ ë¹„êµêµ°</span>
                                <span class="font-mono font-bold text-red-300">Black vs. Mix</span>
                            </div>
                            <div class="flex gap-1 h-2">
                                <div class="bg-stone-900 w-1/2 rounded-l-full"></div>
                                <div class="bg-orange-300 w-1/2 rounded-r-full"></div>
                            </div>
                        </div>
                        <div class="mt-6 text-xs text-stone-400">
                            * ë³¸ ì—°êµ¬ëŠ” ë‹¹ë‡¨ë³‘, ê³ í˜ˆì•• ë“±ì˜ í˜¼ë€ë³€ìˆ˜ë¥¼ ë³´ì •í•œ ë‹¤ë³€ëŸ‰ ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: COMPARATIVE ANALYSIS (Chart.js) -->
        <section id="analysis">
            <div class="mb-8 border-l-4 border-stone-800 pl-4">
                <h3 class="text-2xl font-bold text-gray-900">ì™œ 'ì¢…ë¥˜(Type)'ê°€ ì¤‘ìš”í•œê°€?</h3>
                <p class="text-gray-600 mt-2 max-w-3xl">
                    ê¸°ì¡´ êµ­ì™¸ ì—°êµ¬(Gao et al., 2025 ë“±)ëŠ” ëŒ€ë¶€ë¶„ ë¸”ë™ì»¤í”¼ ìœ„ì£¼ì…ë‹ˆë‹¤. 
                    í•œêµ­ì¸ì˜ ë¯¹ìŠ¤ì»¤í”¼ ì„­ì·¨ íŒ¨í„´ì€ <strong>ì„¤íƒ•ê³¼ í”„ë¦¼(í¬í™”ì§€ë°©)</strong> ì„­ì·¨ë¥¼ ë™ë°˜í•˜ë¯€ë¡œ, 
                    ì»¤í”¼ í•­ì‚°í™” ì„±ë¶„ì˜ ì´ì ì„ ìƒì‡„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ ë³¸ ì—°êµ¬ì˜ í•µì‹¬ ê°€ì„¤ì…ë‹ˆë‹¤.
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Chart 1: Nutrient Composition -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover">
                    <h4 class="font-bold text-lg mb-2 text-center">ì»¤í”¼ 1ì”ë‹¹ ì˜ì–‘ ì„±ë¶„ ì¶”ì •ì¹˜ ë¹„êµ</h4>
                    <p class="text-xs text-center text-gray-500 mb-6">ë¯¹ìŠ¤ì»¤í”¼ì˜ ë‹¹ë¶„ê³¼ ì§€ë°© í•¨ëŸ‰ì— ì£¼ëª©í•˜ì„¸ìš”.</p>
                    <div class="chart-container">
                        <canvas id="nutrientChart"></canvas>
                    </div>
                </div>

                <!-- Chart 2: Hypothesis Trend -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 card-hover">
                    <h4 class="font-bold text-lg mb-2 text-center">ì—°êµ¬ ê°€ì„¤: ì„­ì·¨ëŸ‰ì— ë”°ë¥¸ ì‹ ì¥ ìœ„í—˜ë„</h4>
                    <p class="text-xs text-center text-gray-500 mb-6">ë¸”ë™ì»¤í”¼(ë³´í˜¸ íš¨ê³¼) vs ë¯¹ìŠ¤ì»¤í”¼(ëŒ€ì‚¬ ìœ„í—˜ ì¦ê°€)</p>
                    <div class="chart-container">
                        <canvas id="hypothesisChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: INTERACTIVE SIMULATION & AI INSIGHT -->
        <section id="simulation" class="bg-blue-50 rounded-3xl p-8 md:p-12">
            <div class="text-center mb-10">
                <span class="bg-blue-100 text-blue-800 text-xs font-bold px-3 py-1 rounded-full uppercase">Interactive Lab + Gemini AI</span>
                <h3 class="text-3xl font-bold text-gray-900 mt-4">ë‚˜ì˜ ì‹ ì¥ ê±´ê°• ì‹œë®¬ë ˆì´ì…˜</h3>
                <p class="text-gray-600 mt-2">
                    í•˜ë£¨ì— ë§ˆì‹œëŠ” ì»¤í”¼ì˜ ì–‘ì„ ì¡°ì ˆí•´ë³´ì„¸ìš”. <br>
                    <strong>Gemini AI</strong>ê°€ ê·€í•˜ì˜ íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ êµ¬ì²´ì ì¸ ê±´ê°• ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤.
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-8 items-start">
                <!-- Input Controls -->
                <div class="md:col-span-1 space-y-8 bg-white p-6 rounded-2xl shadow-md">
                    <div>
                        <label class="block text-sm font-bold text-stone-700 mb-2">
                            â˜• ë¸”ë™ ì»¤í”¼ (ì•„ë©”ë¦¬ì¹´ë…¸ ë“±)
                            <span class="float-right text-stone-500 font-normal" id="val-black">0ì”</span>
                        </label>
                        <input type="range" id="input-black" min="0" max="10" value="0" step="1" 
                               class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer accent-stone-700">
                        <p class="text-xs text-stone-500 mt-1">í•­ì‚°í™” ì„±ë¶„(í´ë¦¬í˜ë†€) ê³µê¸‰ì›</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-yellow-700 mb-2">
                            ğŸ¬ ë¯¹ìŠ¤ ì»¤í”¼ (ìíŒê¸° ë“±)
                            <span class="float-right text-yellow-600 font-normal" id="val-mix">0ì”</span>
                        </label>
                        <input type="range" id="input-mix" min="0" max="10" value="0" step="1" 
                               class="w-full h-2 bg-yellow-100 rounded-lg appearance-none cursor-pointer accent-yellow-500">
                        <p class="text-xs text-stone-500 mt-1">ë‹¹ë¶„ ë° í¬í™”ì§€ë°© í•¨ìœ </p>
                    </div>

                    <div class="pt-4 border-t border-gray-100">
                        <div class="flex items-center gap-2 mb-2">
                             <input type="checkbox" id="check-diabetes" class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500">
                             <label for="check-diabetes" class="text-sm text-gray-700">ë‹¹ë‡¨ë³‘ ë³‘ë ¥ ìˆìŒ (ìœ„í—˜ ê°€ì¤‘)</label>
                        </div>
                        <p class="text-xs text-gray-400">ë‹¹ë‡¨ í™˜ìëŠ” í˜ˆë‹¹ ì¡°ì ˆ ë¬¸ì œë¡œ ë¯¹ìŠ¤ì»¤í”¼ì˜ ì˜í–¥ì´ ë” í´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>

                <!-- Visualization Output with AI -->
                <div class="md:col-span-2 space-y-4">
                    <!-- Standard Results -->
                    <div class="bg-white p-6 rounded-2xl shadow-md flex flex-col items-center justify-center min-h-[250px]">
                        <h4 class="text-lg font-bold text-gray-700 mb-6">ê¸°ë³¸ ì˜ˆì¸¡ ë¶„ì„ ê²°ê³¼</h4>
                        
                        <div class="w-full max-w-md relative">
                            <!-- Custom Gauge Bar -->
                            <div class="h-8 w-full bg-gray-200 rounded-full overflow-hidden relative">
                                <!-- Background Gradients -->
                                <div class="absolute top-0 left-0 h-full w-full bg-gradient-to-r from-green-400 via-yellow-400 to-red-500 opacity-30"></div>
                                
                                <!-- Indicator -->
                                <div id="risk-indicator" class="absolute top-0 h-full w-2 bg-slate-800 border-2 border-white shadow-lg transition-all duration-500 ease-out" style="left: 0%"></div>
                            </div>
                            <div class="flex justify-between text-xs text-gray-400 mt-2 font-mono">
                                <span>ì•ˆì „ (Beneficial)</span>
                                <span>ì£¼ì˜ (Caution)</span>
                                <span>ìœ„í—˜ (Risk)</span>
                            </div>
                        </div>

                        <div id="result-text" class="mt-8 text-center animate-pulse">
                            <p class="text-4xl font-black text-gray-300">0</p>
                            <p class="text-sm text-gray-400">ì„­ì·¨ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                        </div>
                    </div>

                    <!-- Gemini AI Insight Box -->
                    <div class="bg-gradient-to-br from-indigo-50 to-purple-50 p-6 rounded-2xl shadow-md border border-indigo-100">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-bold text-indigo-900 flex items-center gap-2">
                                <span>âœ¨</span> Gemini AI ë§ì¶¤ ë¶„ì„
                            </h4>
                            <button id="btn-get-insight" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-lg shadow transition flex items-center gap-2">
                                ë¶„ì„ ì‹¤í–‰í•˜ê¸°
                            </button>
                        </div>
                        <div id="ai-insight-content" class="text-sm text-gray-700 leading-relaxed min-h-[80px] flex items-center justify-center bg-white/50 rounded-lg p-4">
                            <span class="text-gray-400">ìœ„ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ Geminiê°€ ê·€í•˜ì˜ ì„­ì·¨ íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ êµ¬ì²´ì ì¸ ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤.</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: AI RESEARCH ASSISTANT (CHATBOT) -->
        <section id="ai-assistant">
            <div class="bg-white rounded-3xl p-8 shadow-xl border border-gray-100">
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="md:col-span-1">
                        <div class="inline-block p-3 bg-purple-100 text-purple-600 rounded-xl mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">AI ì—°êµ¬ì›ì—ê²Œ ì§ˆë¬¸í•˜ê¸°</h3>
                        <p class="text-gray-500 text-sm mb-6">
                            2026ë…„ ì—°êµ¬ë…¸íŠ¸ì˜ ë‚´ìš©, ì»¤í”¼ì™€ ì‹ ì¥ì˜ ê´€ê³„, í˜¹ì€ ì˜ì–‘ì—­í•™ì  ê¶ê¸ˆì¦ì„ ë¬¼ì–´ë³´ì„¸ìš”. Geminiê°€ ì—°êµ¬ì›ì˜ í˜ë¥´ì†Œë‚˜ë¡œ ë‹µë³€í•©ë‹ˆë‹¤.
                        </p>
                        <div class="space-y-2">
                            <button class="text-left w-full p-3 text-xs bg-gray-50 hover:bg-gray-100 rounded-lg text-gray-600 transition" onclick="setQuestion('ë¯¹ìŠ¤ì»¤í”¼ê°€ ì™œ ì‹ ì¥ì— ì•ˆ ì¢‹ì€ê°€ìš”?')">
                                "ë¯¹ìŠ¤ì»¤í”¼ê°€ ì™œ ì‹ ì¥ì— ì•ˆ ì¢‹ì€ê°€ìš”?"
                            </button>
                            <button class="text-left w-full p-3 text-xs bg-gray-50 hover:bg-gray-100 rounded-lg text-gray-600 transition" onclick="setQuestion('ë¸”ë™ì»¤í”¼ëŠ” í•˜ë£¨ ëª‡ ì”ì´ ì ë‹¹í•œê°€ìš”?')">
                                "ë¸”ë™ì»¤í”¼ëŠ” í•˜ë£¨ ëª‡ ì”ì´ ì ë‹¹í•œê°€ìš”?"
                            </button>
                            <button class="text-left w-full p-3 text-xs bg-gray-50 hover:bg-gray-100 rounded-lg text-gray-600 transition" onclick="setQuestion('eGFR ìˆ˜ì¹˜ê°€ ë¬´ì—‡ì¸ê°€ìš”?')">
                                "eGFR ìˆ˜ì¹˜ê°€ ë¬´ì—‡ì¸ê°€ìš”?"
                            </button>
                        </div>
                    </div>
                    <div class="md:col-span-2 flex flex-col h-[400px] bg-gray-50 rounded-2xl border border-gray-200 overflow-hidden">
                        <!-- Chat History -->
                        <div id="chat-history" class="flex-1 p-6 overflow-y-auto space-y-4">
                            <div class="flex gap-3">
                                <div class="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-white text-xs font-bold flex-shrink-0">AI</div>
                                <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm text-sm text-gray-700 border border-gray-100 max-w-[80%]">
                                    ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ì¡°í•˜ëŠ˜ ì—°êµ¬ì›ì˜ ì—°êµ¬ë¥¼ ë•ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ë¬´ì—‡ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?
                                </div>
                            </div>
                        </div>
                        <!-- Input Area -->
                        <div class="p-4 bg-white border-t border-gray-200">
                            <div class="flex gap-2">
                                <input type="text" id="chat-input" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." class="flex-1 p-3 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm">
                                <button onclick="sendChat()" id="btn-send-chat" class="p-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl shadow-md transition">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: METHODOLOGY & REFERENCES -->
        <section id="methodology">
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Methodology Card -->
                <div class="md:col-span-2">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">ì—°êµ¬ ì§„í–‰ í”„ë¡œì„¸ìŠ¤ (Methodology)</h3>
                    <div class="space-y-4">
                        <div class="flex">
                            <div class="flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 text-blue-600 font-bold">1</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-medium text-gray-900">ë°ì´í„° ì¶”ì¶œ ë° ì •ì œ</h4>
                                <p class="text-gray-500 text-sm">êµ­ë¯¼ê±´ê°•ì˜ì–‘ì¡°ì‚¬(KNHANES) ë°ì´í„° ì¤‘ ë§Œ 19ì„¸~64ì„¸ ì„±ì¸ ëŒ€ìƒ. eGFR ë° ì‹í’ˆì„­ì·¨ë¹ˆë„ì¡°ì‚¬(FFQ) ë°ì´í„° ê²°ì¸¡ì¹˜ ì œê±°.</p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 text-blue-600 font-bold">2</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-medium text-gray-900">ê·¸ë£¹ ë¶„ë¥˜ (Categorization)</h4>
                                <p class="text-gray-500 text-sm">
                                    1. ë¹„ì„­ì·¨êµ°<br>
                                    2. ë¸”ë™ì»¤í”¼êµ° (ì•„ë©”ë¦¬ì¹´ë…¸, ì›ë‘)<br>
                                    3. ë¯¹ìŠ¤ì»¤í”¼êµ° (ì„¤íƒ•+í”„ë¦¼ í¬í•¨)<br>
                                    4. ê¸°íƒ€ ê°€ë‹¹ìŒë£Œêµ°
                                </p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 text-blue-600 font-bold">3</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-medium text-gray-900">í†µê³„ ë¶„ì„ (Statistical Analysis)</h4>
                                <p class="text-gray-500 text-sm">
                                    ë‹¤ë³€ëŸ‰ ë¡œì§€ìŠ¤í‹± íšŒê·€ë¶„ì„(Multivariate Logistic Regression). <br>
                                    ë³´ì • ë³€ìˆ˜: ì—°ë ¹, ì„±ë³„, BMI, í¡ì—°, ìŒì£¼, ê³ í˜ˆì••, ë‹¹ë‡¨ë³‘, ì´ ì—ë„ˆì§€ ì„­ì·¨ëŸ‰ ë“±.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- References Card -->
                <div class="bg-stone-50 p-6 rounded-2xl border border-stone-100">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">ì£¼ìš” ì°¸ê³  ë¬¸í—Œ</h3>
                    <ul class="space-y-3 text-xs text-gray-600">
                        <li class="pl-3 border-l-2 border-stone-300">
                            <strong>Gao et al. (2025)</strong><br>
                            Association between coffee/caffeine and CKD (Sci Rep).
                        </li>
                        <li class="pl-3 border-l-2 border-stone-300">
                            <strong>Jhee et al.</strong><br>
                            Effects of Coffee Intake on Incident CKD (Am J Med).
                        </li>
                        <li class="pl-3 border-l-2 border-stone-300">
                            <strong>Shin et al. (2018)</strong><br>
                            í•œêµ­ ì„±ì¸ì—ì„œ ì»¤í”¼ ì„­ì·¨ì™€ eGFRì˜ ì—°ê´€ì„± (KJFP).
                        </li>
                        <li class="pl-3 border-l-2 border-stone-300">
                            <strong>KNHANES</strong><br>
                            ì§ˆë³‘ê´€ë¦¬ì²­ êµ­ë¯¼ê±´ê°•ì˜ì–‘ì¡°ì‚¬ ì›ì‹œìë£Œ ì§€ì¹¨.
                        </li>
                    </ul>
                    <div class="mt-6 pt-4 border-t border-stone-200">
                         <p class="text-xs font-bold text-stone-500">ì—°êµ¬ì ë©”ëª¨:</p>
                         <p class="text-xs text-stone-400 mt-1">"ì„œêµ¬ ì—°êµ¬ ê²°ê³¼ì™€ í•œêµ­ì˜ í˜„ì‹¤ ì‚¬ì´ì˜ ê°„ê·¹ì„ ë©”ìš°ëŠ” ê²ƒì´ ì´ ì—°êµ¬ì˜ í•µì‹¬ì…ë‹ˆë‹¤." - ì¡°í•˜ëŠ˜</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-bold text-stone-100">ê²½í¬ëŒ€í•™êµ ì‹í’ˆì˜ì–‘í•™ê³¼ ì˜ì–‘ì—­í•™ ì—°êµ¬ì‹¤</p>
            <p class="text-sm mt-2">2026ë…„ 1ì›” ì—°êµ¬ë…¸íŠ¸ ê¸°ë°˜ í”„ë¡œí† íƒ€ì…</p>
            <p class="text-xs mt-8 opacity-50">ë³¸ ì›¹ì‚¬ì´íŠ¸ëŠ” ì—°êµ¬ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìœ¼ë©°, ì˜í•™ì  ì§„ë‹¨ì„ ëŒ€ì‹ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
    </footer>

    <!-- Logic Script -->
    <script>
        // --- System Configuration for Gemini API ---
        const apiKey = ""; // System provides this at runtime
        
        async function callGeminiAPI(userPrompt, systemInstruction) {
            if (!apiKey) {
                console.error("API Key not found");
                return "API Key Error: í™˜ê²½ ì„¤ì •ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.";
            }

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] }
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error("Gemini API Error:", error);
                return "ì£„ì†¡í•©ë‹ˆë‹¤. AI ì„œë¹„ìŠ¤ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
            }
        }

        // --- State Management ---
        const state = {
            blackCups: 0,
            mixCups: 0,
            hasDiabetes: false
        };

        // --- Chart Initialization (Same as before) ---
        function initCharts() {
            // Chart 1: Nutrient Composition
            const ctxNutrient = document.getElementById('nutrientChart').getContext('2d');
            new Chart(ctxNutrient, {
                type: 'bar',
                data: {
                    labels: ['ë¸”ë™ ì»¤í”¼ (1ì”)', 'ë¯¹ìŠ¤ ì»¤í”¼ (1ë´‰)'],
                    datasets: [
                        { label: 'ì¹´í˜ì¸ (mg)', data: [70, 50], backgroundColor: '#4B3621' },
                        { label: 'ë‹¹ë¥˜ (g)', data: [0, 6], backgroundColor: '#F59E0B' },
                        { label: 'í¬í™”ì§€ë°© (g)', data: [0, 1.5], backgroundColor: '#EF4444' }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { x: { stacked: true }, y: { stacked: true, title: { display: true, text: 'í•¨ëŸ‰' } } },
                    plugins: { tooltip: { callbacks: { footer: (items) => items[0].label.includes('ë¯¹ìŠ¤') ? 'ë‹¹ë¶„ê³¼ í”„ë¦¼ì´ ì£¼ìš” ë³€ìˆ˜ì…ë‹ˆë‹¤.' : 'ìˆœìˆ˜ ì»¤í”¼ ì¶”ì¶œë¬¼ ìœ„ì£¼ì…ë‹ˆë‹¤.' } } }
                }
            });

            // Chart 2: Hypothesis Trend
            const ctxHypo = document.getElementById('hypothesisChart').getContext('2d');
            new Chart(ctxHypo, {
                type: 'line',
                data: {
                    labels: ['0ì”', '1ì”', '2ì”', '3ì”', '4ì” ì´ìƒ'],
                    datasets: [
                        { label: 'ë¸”ë™ ì»¤í”¼', data: [100, 102, 103, 101, 98], borderColor: '#10B981', backgroundColor: '#10B981', tension: 0.4 },
                        { label: 'ë¯¹ìŠ¤ ì»¤í”¼', data: [100, 98, 95, 90, 85], borderColor: '#EF4444', backgroundColor: '#EF4444', borderDash: [5, 5], tension: 0.4 }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { y: { title: { display: true, text: 'ì‹ ì¥ ê±´ê°• ì ìˆ˜' }, suggestedMin: 80, suggestedMax: 110 } }
                }
            });
        }

        // --- Simulation Logic ---
        function updateSimulation() {
            const inputBlack = document.getElementById('input-black');
            const inputMix = document.getElementById('input-mix');
            const valBlack = document.getElementById('val-black');
            const valMix = document.getElementById('val-mix');
            const checkDia = document.getElementById('check-diabetes');
            const indicator = document.getElementById('risk-indicator');
            const resultText = document.getElementById('result-text');

            state.blackCups = parseInt(inputBlack.value);
            state.mixCups = parseInt(inputMix.value);
            state.hasDiabetes = checkDia.checked;

            valBlack.textContent = `${state.blackCups}ì”`;
            valMix.textContent = `${state.mixCups}ì”`;

            // Simple Score Logic
            let score = 50; 
            if (state.blackCups <= 3) score += (state.blackCups * 3);
            else score += (9) - ((state.blackCups - 3) * 2);

            let mixPenalty = state.mixCups * 5;
            if (state.hasDiabetes) mixPenalty *= 1.5;
            score -= mixPenalty;

            let visualPercent = Math.max(0, Math.min(100, score));
            indicator.style.left = `${visualPercent}%`;

            let riskLevel = "", colorClass = "";
            if (visualPercent >= 60) { riskLevel = "ì–‘í˜¸ (Good)"; colorClass = "text-green-500"; }
            else if (visualPercent >= 35) { riskLevel = "ì£¼ì˜ (Caution)"; colorClass = "text-yellow-500"; }
            else { riskLevel = "ìœ„í—˜ (High Risk)"; colorClass = "text-red-500"; }

            resultText.innerHTML = `<p class="text-4xl font-black ${colorClass}">${riskLevel}</p><p class="text-sm text-gray-400 mt-2">Kidney Stress Score: ${100 - visualPercent}</p>`;
        }

        // --- Gemini Feature 1: Get AI Insight ---
        async function getAIInsight() {
            const btn = document.getElementById('btn-get-insight');
            const contentDiv = document.getElementById('ai-insight-content');
            
            // UI Loading State
            btn.disabled = true;
            btn.innerHTML = `<span class="typing-indicator"><span></span><span></span><span></span></span> ë¶„ì„ ì¤‘...`;
            contentDiv.innerHTML = "Geminiê°€ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...";

            const prompt = `
                ì‚¬ìš©ì ë°ì´í„°:
                - ë¸”ë™ì»¤í”¼ ì„­ì·¨ëŸ‰: í•˜ë£¨ ${state.blackCups}ì”
                - ë¯¹ìŠ¤ì»¤í”¼ ì„­ì·¨ëŸ‰: í•˜ë£¨ ${state.mixCups}ì”
                - ë‹¹ë‡¨ë³‘ ìœ ë¬´: ${state.hasDiabetes ? 'ìˆìŒ' : 'ì—†ìŒ'}

                ì—­í• : ì˜ì–‘ì—­í•™ ì—°êµ¬ì› ì¡°í•˜ëŠ˜.
                ì§€ì‹œì‚¬í•­: ìœ„ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì´ ì‚¬ëŒì˜ ì‹ ì¥ ê±´ê°•ì— ëŒ€í•œ ì§§ì€(3ë¬¸ì¥ ë‚´ì™¸) ì¡°ì–¸ì„ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.
                ì°¸ê³  ê°€ì„¤: ë¸”ë™ì»¤í”¼ëŠ” í•­ì‚°í™” íš¨ê³¼ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‚˜, ë¯¹ìŠ¤ì»¤í”¼ì˜ ì„¤íƒ•ê³¼ í”„ë¦¼ì€ ëŒ€ì‚¬ì¦í›„êµ°ì„ ìœ ë°œí•˜ì—¬ eGFRì„ ë‚®ì¶œ ìœ„í—˜ì´ ìˆìŒ. ë‹¹ë‡¨ê°€ ìˆìœ¼ë©´ ìœ„í—˜ì´ ê°€ì¤‘ë¨.
                í†¤ì•¤ë§¤ë„ˆ: ì „ë¬¸ì ì´ì§€ë§Œ ì¹œì ˆí•˜ê²Œ.
            `;

            const response = await callGeminiAPI(prompt, "ë‹¹ì‹ ì€ ì˜ì–‘ì—­í•™ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.");
            
            // Render Result
            contentDiv.innerHTML = `<strong>AI ë¶„ì„ ê²°ê³¼:</strong><br>${response}`;
            btn.innerHTML = "ë‹¤ì‹œ ë¶„ì„í•˜ê¸°";
            btn.disabled = false;
        }

        // --- Gemini Feature 2: AI Chatbot ---
        function setQuestion(q) {
            document.getElementById('chat-input').value = q;
        }

        async function sendChat() {
            const inputEl = document.getElementById('chat-input');
            const historyEl = document.getElementById('chat-history');
            const btn = document.getElementById('btn-send-chat');
            const message = inputEl.value.trim();

            if (!message) return;

            // 1. Add User Message
            historyEl.innerHTML += `
                <div class="flex gap-3 justify-end">
                    <div class="bg-purple-600 text-white p-3 rounded-2xl rounded-tr-none shadow-sm text-sm max-w-[80%]">
                        ${message}
                    </div>
                </div>`;
            inputEl.value = '';
            historyEl.scrollTop = historyEl.scrollHeight;

            // 2. Loading State
            btn.disabled = true;
            const loadingId = 'loading-' + Date.now();
            historyEl.innerHTML += `
                <div id="${loadingId}" class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-white text-xs font-bold flex-shrink-0">AI</div>
                    <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm text-sm text-gray-700 border border-gray-100">
                        <div class="typing-indicator"><span></span><span></span><span></span></div>
                    </div>
                </div>`;
            historyEl.scrollTop = historyEl.scrollHeight;

            // 3. Call Gemini
            const systemPrompt = "ë‹¹ì‹ ì€ ê²½í¬ëŒ€í•™êµ ì˜ì–‘ì—­í•™ ì—°êµ¬ì‹¤ì˜ ì¡°í•˜ëŠ˜ ì—°êµ¬ì›ì…ë‹ˆë‹¤. 2026ë…„ 1ì›” ì—°êµ¬ë…¸íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œêµ­ì¸ì˜ ì»¤í”¼ ì„­ì·¨ì™€ ì‹ ì¥ ê±´ê°•(eGFR)ì˜ ê´€ê³„ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ë¯¹ìŠ¤ì»¤í”¼ì˜ ìœ„í—˜ì„±ê³¼ ë¸”ë™ì»¤í”¼ì˜ ì ì¬ì  ì´ì ì— ëŒ€í•´ ê· í˜• ì¡íŒ ì‹œê°ìœ¼ë¡œ ë‹µë³€í•˜ì„¸ìš”.";
            const response = await callGeminiAPI(message, systemPrompt);

            // 4. Update UI
            document.getElementById(loadingId).remove();
            historyEl.innerHTML += `
                <div class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-white text-xs font-bold flex-shrink-0">AI</div>
                    <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm text-sm text-gray-700 border border-gray-100 max-w-[90%] leading-relaxed">
                        ${response}
                    </div>
                </div>`;
            
            historyEl.scrollTop = historyEl.scrollHeight;
            btn.disabled = false;
        }

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            ['input-black', 'input-mix', 'check-diabetes'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateSimulation);
            });
            updateSimulation();

            // AI Buttons
            document.getElementById('btn-get-insight').addEventListener('click', getAIInsight);
            
            // Enter key for chat
            document.getElementById('chat-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendChat();
            });
        });

    </script>
</body>
</html>